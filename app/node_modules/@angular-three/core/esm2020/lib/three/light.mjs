var _NgtLight_lightArgs, _NgtLight_light;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { Directive, Inject, Input, NgZone } from '@angular/core';
import { NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, } from '../controllers/object-3d.controller';
import { applyProps } from '../utils/apply-props';
import * as i0 from "@angular/core";
import * as i1 from "../controllers/object-3d.controller";
export class NgtLight {
    constructor(objectController, ngZone) {
        this.objectController = objectController;
        this.ngZone = ngZone;
        _NgtLight_lightArgs.set(this, []);
        _NgtLight_light.set(this, void 0);
        objectController.initFn = () => {
            __classPrivateFieldSet(this, _NgtLight_light, new this.lightType(...__classPrivateFieldGet(this, _NgtLight_lightArgs, "f")), "f");
            if (this.intensity) {
                applyProps(this.light, { intensity: this.intensity });
            }
            if (this.shadow) {
                applyProps(this.light, this.shadow);
            }
            return __classPrivateFieldGet(this, _NgtLight_light, "f");
        };
    }
    set lightArgs(v) {
        __classPrivateFieldSet(this, _NgtLight_lightArgs, Array.isArray(v) ? v : [v], "f");
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            if (!__classPrivateFieldGet(this, _NgtLight_light, "f")) {
                this.objectController.init();
            }
        });
    }
    get light() {
        return __classPrivateFieldGet(this, _NgtLight_light, "f");
    }
}
_NgtLight_lightArgs = new WeakMap(), _NgtLight_light = new WeakMap();
NgtLight.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtLight, deps: [{ token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });
NgtLight.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.0.3", type: NgtLight, inputs: { intensity: "intensity", shadow: "shadow" }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtLight, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: i0.NgZone }]; }, propDecorators: { intensity: [{
                type: Input
            }], shadow: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlnaHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9jb3JlL3NyYy9saWIvdGhyZWUvbGlnaHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFVLE1BQU0sZUFBZSxDQUFDO0FBRXpFLE9BQU8sRUFDTCw2QkFBNkIsRUFDN0IscUJBQXFCLEdBQ3RCLE1BQU0scUNBQXFDLENBQUM7QUFFN0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDOzs7QUFHbEQsTUFBTSxPQUFnQixRQUFRO0lBUTVCLFlBRVksZ0JBQXVDLEVBQ3ZDLE1BQWM7UUFEZCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXVCO1FBQ3ZDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFnQjFCLDhCQUF3QixFQUFFLEVBQUM7UUFRM0Isa0NBQWdCO1FBdEJkLGdCQUFnQixDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7WUFDN0IsdUJBQUEsSUFBSSxtQkFBVSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyx1QkFBQSxJQUFJLDJCQUFXLENBQUMsTUFBQSxDQUFDO1lBQ3JELElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtnQkFDbEIsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUM7YUFDdkQ7WUFFRCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQ2YsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQWtDLENBQUMsQ0FBQzthQUNqRTtZQUVELE9BQU8sdUJBQUEsSUFBSSx1QkFBTyxDQUFDO1FBQ3JCLENBQUMsQ0FBQztJQUNKLENBQUM7SUFHRCxJQUFjLFNBQVMsQ0FBQyxDQUFzQjtRQUM1Qyx1QkFBQSxJQUFJLHVCQUFjLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBQSxDQUFDO1FBQzdDLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFJRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7WUFDakMsSUFBSSxDQUFDLHVCQUFBLElBQUksdUJBQU8sRUFBRTtnQkFDaEIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDO2FBQzlCO1FBQ0gsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyx1QkFBQSxJQUFJLHVCQUFPLENBQUM7SUFDckIsQ0FBQzs7O3FHQS9DbUIsUUFBUSxrQkFTbEIsNkJBQTZCO3lGQVRuQixRQUFROzJGQUFSLFFBQVE7a0JBRDdCLFNBQVM7OzBCQVVMLE1BQU07MkJBQUMsNkJBQTZCO2lFQUo5QixTQUFTO3NCQUFqQixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5qZWN0LCBJbnB1dCwgTmdab25lLCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCB7XG4gIE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSLFxuICBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG59IGZyb20gJy4uL2NvbnRyb2xsZXJzL29iamVjdC0zZC5jb250cm9sbGVyJztcbmltcG9ydCB0eXBlIHsgQW55Q29uc3RydWN0b3IsIFVua25vd25SZWNvcmQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBhcHBseVByb3BzIH0gZnJvbSAnLi4vdXRpbHMvYXBwbHktcHJvcHMnO1xuXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOZ3RMaWdodDxUTGlnaHQgZXh0ZW5kcyBUSFJFRS5MaWdodCA9IFRIUkVFLkxpZ2h0PlxuICBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICBhYnN0cmFjdCBsaWdodFR5cGU6IEFueUNvbnN0cnVjdG9yPFRMaWdodD47XG5cbiAgQElucHV0KCkgaW50ZW5zaXR5PzogbnVtYmVyO1xuICBASW5wdXQoKSBzaGFkb3c/OiBQYXJ0aWFsPFRIUkVFLkxpZ2h0U2hhZG93PjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIHByb3RlY3RlZCBvYmplY3RDb250cm9sbGVyOiBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lXG4gICkge1xuICAgIG9iamVjdENvbnRyb2xsZXIuaW5pdEZuID0gKCkgPT4ge1xuICAgICAgdGhpcy4jbGlnaHQgPSBuZXcgdGhpcy5saWdodFR5cGUoLi4udGhpcy4jbGlnaHRBcmdzKTtcbiAgICAgIGlmICh0aGlzLmludGVuc2l0eSkge1xuICAgICAgICBhcHBseVByb3BzKHRoaXMubGlnaHQsIHsgaW50ZW5zaXR5OiB0aGlzLmludGVuc2l0eSB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2hhZG93KSB7XG4gICAgICAgIGFwcGx5UHJvcHModGhpcy5saWdodCwgdGhpcy5zaGFkb3cgYXMgdW5rbm93biBhcyBVbmtub3duUmVjb3JkKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuI2xpZ2h0O1xuICAgIH07XG4gIH1cblxuICAjbGlnaHRBcmdzOiB1bmtub3duW10gPSBbXTtcbiAgcHJvdGVjdGVkIHNldCBsaWdodEFyZ3ModjogdW5rbm93biB8IHVua25vd25bXSkge1xuICAgIHRoaXMuI2xpZ2h0QXJncyA9IEFycmF5LmlzQXJyYXkodikgPyB2IDogW3ZdO1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMub2JqZWN0Q29udHJvbGxlci5pbml0KCk7XG4gICAgfSk7XG4gIH1cblxuICAjbGlnaHQhOiBUTGlnaHQ7XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLiNsaWdodCkge1xuICAgICAgICB0aGlzLm9iamVjdENvbnRyb2xsZXIuaW5pdCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0IGxpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLiNsaWdodDtcbiAgfVxufVxuIl19