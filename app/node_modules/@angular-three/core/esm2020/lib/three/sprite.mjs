var _NgtCommonSprite_sprite;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { ContentChild, Directive, Inject, Input, NgZone, } from '@angular/core';
import * as THREE from 'three';
import { NGT_OBJECT_CONTROLLER_PROVIDER, NgtObject3dController, } from '../controllers/object-3d.controller';
import { NgtMaterial } from './material';
import * as i0 from "@angular/core";
import * as i1 from "../controllers/object-3d.controller";
export class NgtCommonSprite {
    constructor(objectController, ngZone) {
        this.objectController = objectController;
        this.ngZone = ngZone;
        _NgtCommonSprite_sprite.set(this, void 0);
        objectController.initFn = () => {
            if (this.material) {
                __classPrivateFieldSet(this, _NgtCommonSprite_sprite, new this.spriteType(this.material), "f");
            }
            else if (this.materialDirective) {
                if (this.materialDirective.material instanceof THREE.SpriteMaterial) {
                    __classPrivateFieldSet(this, _NgtCommonSprite_sprite, new this.spriteType(this.materialDirective.material), "f");
                }
            }
            return __classPrivateFieldGet(this, _NgtCommonSprite_sprite, "f");
        };
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    get sprite() {
        return __classPrivateFieldGet(this, _NgtCommonSprite_sprite, "f");
    }
}
_NgtCommonSprite_sprite = new WeakMap();
NgtCommonSprite.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtCommonSprite, deps: [{ token: NGT_OBJECT_CONTROLLER_PROVIDER }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });
NgtCommonSprite.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.0.3", type: NgtCommonSprite, inputs: { material: "material" }, queries: [{ propertyName: "materialDirective", first: true, predicate: NgtMaterial, descendants: true }], ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtCommonSprite, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_CONTROLLER_PROVIDER]
                }] }, { type: i0.NgZone }]; }, propDecorators: { material: [{
                type: Input
            }], materialDirective: [{
                type: ContentChild,
                args: [NgtMaterial]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3ByaXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3RocmVlL3Nwcml0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFDTCxZQUFZLEVBQ1osU0FBUyxFQUNULE1BQU0sRUFDTixLQUFLLEVBQ0wsTUFBTSxHQUVQLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sS0FBSyxLQUFLLE1BQU0sT0FBTyxDQUFDO0FBQy9CLE9BQU8sRUFDTCw4QkFBOEIsRUFDOUIscUJBQXFCLEdBQ3RCLE1BQU0scUNBQXFDLENBQUM7QUFFN0MsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFlBQVksQ0FBQzs7O0FBR3pDLE1BQU0sT0FBZ0IsZUFBZTtJQVluQyxZQUVZLGdCQUF1QyxFQUN2QyxNQUFjO1FBRGQscUJBQWdCLEdBQWhCLGdCQUFnQixDQUF1QjtRQUN2QyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBTDFCLDBDQUFrQjtRQU9oQixnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQzdCLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsdUJBQUEsSUFBSSwyQkFBVyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFBLENBQUM7YUFDbkQ7aUJBQU0sSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUU7Z0JBQ2pDLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsWUFBWSxLQUFLLENBQUMsY0FBYyxFQUFFO29CQUNuRSx1QkFBQSxJQUFJLDJCQUFXLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLE1BQUEsQ0FBQztpQkFDckU7YUFDRjtZQUVELE9BQU8sdUJBQUEsSUFBSSwrQkFBUSxDQUFDO1FBQ3RCLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7WUFDakMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sdUJBQUEsSUFBSSwrQkFBUSxDQUFDO0lBQ3RCLENBQUM7Ozs0R0F0Q21CLGVBQWUsa0JBYXpCLDhCQUE4QjtnR0FicEIsZUFBZSwyR0FNckIsV0FBVzsyRkFOTCxlQUFlO2tCQURwQyxTQUFTOzswQkFjTCxNQUFNOzJCQUFDLDhCQUE4QjtpRUFUL0IsUUFBUTtzQkFBaEIsS0FBSztnQkFFcUIsaUJBQWlCO3NCQUEzQyxZQUFZO3VCQUFDLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb250ZW50Q2hpbGQsXG4gIERpcmVjdGl2ZSxcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgTmdab25lLFxuICBPbkluaXQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHtcbiAgTkdUX09CSkVDVF9DT05UUk9MTEVSX1BST1ZJREVSLFxuICBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG59IGZyb20gJy4uL2NvbnRyb2xsZXJzL29iamVjdC0zZC5jb250cm9sbGVyJztcbmltcG9ydCB0eXBlIHsgQW55Q29uc3RydWN0b3IgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBOZ3RNYXRlcmlhbCB9IGZyb20gJy4vbWF0ZXJpYWwnO1xuXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBOZ3RDb21tb25TcHJpdGU8XG4gIFRTcHJpdGUgZXh0ZW5kcyBUSFJFRS5TcHJpdGUgPSBUSFJFRS5TcHJpdGVcbj4gaW1wbGVtZW50cyBPbkluaXRcbntcbiAgQElucHV0KCkgbWF0ZXJpYWw/OiBUSFJFRS5TcHJpdGVNYXRlcmlhbDtcblxuICBAQ29udGVudENoaWxkKE5ndE1hdGVyaWFsKSBtYXRlcmlhbERpcmVjdGl2ZT86IE5ndE1hdGVyaWFsO1xuXG4gIGFic3RyYWN0IHNwcml0ZVR5cGU6IEFueUNvbnN0cnVjdG9yPFRTcHJpdGU+O1xuXG4gICNzcHJpdGUhOiBUU3ByaXRlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoTkdUX09CSkVDVF9DT05UUk9MTEVSX1BST1ZJREVSKVxuICAgIHByb3RlY3RlZCBvYmplY3RDb250cm9sbGVyOiBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lXG4gICkge1xuICAgIG9iamVjdENvbnRyb2xsZXIuaW5pdEZuID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMubWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy4jc3ByaXRlID0gbmV3IHRoaXMuc3ByaXRlVHlwZSh0aGlzLm1hdGVyaWFsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tYXRlcmlhbERpcmVjdGl2ZSkge1xuICAgICAgICBpZiAodGhpcy5tYXRlcmlhbERpcmVjdGl2ZS5tYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLlNwcml0ZU1hdGVyaWFsKSB7XG4gICAgICAgICAgdGhpcy4jc3ByaXRlID0gbmV3IHRoaXMuc3ByaXRlVHlwZSh0aGlzLm1hdGVyaWFsRGlyZWN0aXZlLm1hdGVyaWFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy4jc3ByaXRlO1xuICAgIH07XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLm5nWm9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdENvbnRyb2xsZXIuaW5pdCgpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0IHNwcml0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy4jc3ByaXRlO1xuICB9XG59XG4iXX0=