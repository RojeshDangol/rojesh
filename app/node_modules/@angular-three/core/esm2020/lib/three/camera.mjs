var _NgtCommonCamera_cameraArgs, _NgtCommonCamera_camera;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
import { Directive, Inject, NgZone } from '@angular/core';
import { NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, } from '../controllers/object-3d.controller';
import * as i0 from "@angular/core";
import * as i1 from "../controllers/object-3d.controller";
export class NgtCommonCamera {
    constructor(objectController, ngZone) {
        this.objectController = objectController;
        this.ngZone = ngZone;
        _NgtCommonCamera_cameraArgs.set(this, []);
        _NgtCommonCamera_camera.set(this, void 0);
        objectController.initFn = () => {
            __classPrivateFieldSet(this, _NgtCommonCamera_camera, new this.cameraType(...__classPrivateFieldGet(this, _NgtCommonCamera_cameraArgs, "f")), "f");
            return __classPrivateFieldGet(this, _NgtCommonCamera_camera, "f");
        };
    }
    set cameraArgs(v) {
        __classPrivateFieldSet(this, _NgtCommonCamera_cameraArgs, Array.isArray(v) ? v : [v], "f");
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    ngOnInit() {
        this.ngZone.runOutsideAngular(() => {
            if (!__classPrivateFieldGet(this, _NgtCommonCamera_camera, "f")) {
                this.objectController.init();
            }
        });
    }
    get camera() {
        return __classPrivateFieldGet(this, _NgtCommonCamera_camera, "f");
    }
}
_NgtCommonCamera_cameraArgs = new WeakMap(), _NgtCommonCamera_camera = new WeakMap();
NgtCommonCamera.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtCommonCamera, deps: [{ token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Directive });
NgtCommonCamera.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.0.3", type: NgtCommonCamera, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtCommonCamera, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: i0.NgZone }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FtZXJhLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvY29yZS9zcmMvbGliL3RocmVlL2NhbWVyYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUVsRSxPQUFPLEVBQ0wsNkJBQTZCLEVBQzdCLHFCQUFxQixHQUN0QixNQUFNLHFDQUFxQyxDQUFDOzs7QUFJN0MsTUFBTSxPQUFnQixlQUFlO0lBTW5DLFlBRVksZ0JBQXVDLEVBQ3ZDLE1BQWM7UUFEZCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXVCO1FBQ3ZDLFdBQU0sR0FBTixNQUFNLENBQVE7UUFRMUIsc0NBQXlCLEVBQUUsRUFBQztRQWdCNUIsMENBQWtCO1FBdEJoQixnQkFBZ0IsQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFO1lBQzdCLHVCQUFBLElBQUksMkJBQVcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsdUJBQUEsSUFBSSxtQ0FBWSxDQUFDLE1BQUEsQ0FBQztZQUN4RCxPQUFPLHVCQUFBLElBQUksK0JBQVEsQ0FBQztRQUN0QixDQUFDLENBQUM7SUFDSixDQUFDO0lBR0QsSUFBYyxVQUFVLENBQUMsQ0FBc0I7UUFDN0MsdUJBQUEsSUFBSSwrQkFBZSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQUEsQ0FBQztRQUM5QyxJQUFJLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsRUFBRTtZQUNqQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRUQsUUFBUTtRQUNOLElBQUksQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsR0FBRyxFQUFFO1lBQ2pDLElBQUksQ0FBQyx1QkFBQSxJQUFJLCtCQUFRLEVBQUU7Z0JBQ2pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQzthQUM5QjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUdELElBQUksTUFBTTtRQUNSLE9BQU8sdUJBQUEsSUFBSSwrQkFBUSxDQUFDO0lBQ3RCLENBQUM7Ozs0R0FwQ21CLGVBQWUsa0JBT3pCLDZCQUE2QjtnR0FQbkIsZUFBZTsyRkFBZixlQUFlO2tCQURwQyxTQUFTOzswQkFRTCxNQUFNOzJCQUFDLDZCQUE2QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5qZWN0LCBOZ1pvbmUsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnO1xuaW1wb3J0IHtcbiAgTkdUX09CSkVDVF9XQVRDSEVEX0NPTlRST0xMRVIsXG4gIE5ndE9iamVjdDNkQ29udHJvbGxlcixcbn0gZnJvbSAnLi4vY29udHJvbGxlcnMvb2JqZWN0LTNkLmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgQW55Q29uc3RydWN0b3IgfSBmcm9tICcuLi90eXBlcyc7XG5cbkBEaXJlY3RpdmUoKVxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE5ndENvbW1vbkNhbWVyYTxcbiAgVENhbWVyYSBleHRlbmRzIFRIUkVFLkNhbWVyYSA9IFRIUkVFLkNhbWVyYVxuPiBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICBhYnN0cmFjdCBjYW1lcmFUeXBlOiBBbnlDb25zdHJ1Y3RvcjxUQ2FtZXJhPjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASW5qZWN0KE5HVF9PQkpFQ1RfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIHByb3RlY3RlZCBvYmplY3RDb250cm9sbGVyOiBOZ3RPYmplY3QzZENvbnRyb2xsZXIsXG4gICAgcHJvdGVjdGVkIG5nWm9uZTogTmdab25lXG4gICkge1xuICAgIG9iamVjdENvbnRyb2xsZXIuaW5pdEZuID0gKCkgPT4ge1xuICAgICAgdGhpcy4jY2FtZXJhID0gbmV3IHRoaXMuY2FtZXJhVHlwZSguLi50aGlzLiNjYW1lcmFBcmdzKTtcbiAgICAgIHJldHVybiB0aGlzLiNjYW1lcmE7XG4gICAgfTtcbiAgfVxuXG4gICNjYW1lcmFBcmdzOiB1bmtub3duW10gPSBbXTtcbiAgcHJvdGVjdGVkIHNldCBjYW1lcmFBcmdzKHY6IHVua25vd24gfCB1bmtub3duW10pIHtcbiAgICB0aGlzLiNjYW1lcmFBcmdzID0gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbdl07XG4gICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3RDb250cm9sbGVyLmluaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy4jY2FtZXJhKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Q29udHJvbGxlci5pbml0KCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAjY2FtZXJhITogVENhbWVyYTtcbiAgZ2V0IGNhbWVyYSgpOiBUQ2FtZXJhIHtcbiAgICByZXR1cm4gdGhpcy4jY2FtZXJhO1xuICB9XG59XG4iXX0=