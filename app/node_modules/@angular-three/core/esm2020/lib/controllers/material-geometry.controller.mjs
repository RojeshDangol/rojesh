var _NgtMaterialGeometryController_meshArgs, _NgtMaterialGeometryController_contentMaterialController, _NgtMaterialGeometryController_contentGeometryController;
import { __classPrivateFieldGet, __classPrivateFieldSet } from "tslib";
// GENERATED
import { Directive, Inject, InjectionToken, Input, NgModule, NgZone, } from '@angular/core';
import * as THREE from 'three';
import { NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER, NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER, NgtContentGeometryController, } from './content-geometry.controller';
import { NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER, NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER, NgtContentMaterialController, } from './content-material.controller';
import { Controller, createControllerProviderFactory } from './controller';
import { NGT_OBJECT_CONTROLLER_PROVIDER, NGT_OBJECT_WATCHED_CONTROLLER, NgtObject3dController, } from './object-3d.controller';
import * as i0 from "@angular/core";
import * as i1 from "./object-3d.controller";
import * as i2 from "./content-material.controller";
import * as i3 from "./content-geometry.controller";
export const NGT_OBJECT_TYPE = new InjectionToken('Object3d Type', {
    providedIn: 'root',
    factory: () => THREE.Object3D,
});
export const NGT_OBJECT_POST_INIT = new InjectionToken('Object3d PostInit', {
    providedIn: 'root',
    factory: () => undefined,
});
export class NgtMaterialGeometryController extends Controller {
    constructor(ngZone, objectController, objectType, objectPostInit, contentMaterialController, contentGeometryController) {
        super(ngZone);
        this.objectController = objectController;
        this.objectType = objectType;
        this.objectPostInit = objectPostInit;
        _NgtMaterialGeometryController_meshArgs.set(this, []);
        _NgtMaterialGeometryController_contentMaterialController.set(this, void 0);
        _NgtMaterialGeometryController_contentGeometryController.set(this, void 0);
        __classPrivateFieldSet(this, _NgtMaterialGeometryController_contentMaterialController, contentMaterialController.contentMaterialController ??
            contentMaterialController, "f");
        __classPrivateFieldSet(this, _NgtMaterialGeometryController_contentGeometryController, contentGeometryController.contentGeometryController ??
            contentGeometryController, "f");
        objectController.initFn = () => {
            if (!__classPrivateFieldGet(this, _NgtMaterialGeometryController_contentGeometryController, "f").geometry) {
                __classPrivateFieldGet(this, _NgtMaterialGeometryController_contentGeometryController, "f").construct();
            }
            if (!__classPrivateFieldGet(this, _NgtMaterialGeometryController_contentMaterialController, "f").material) {
                __classPrivateFieldGet(this, _NgtMaterialGeometryController_contentMaterialController, "f").construct();
            }
            const object = new this.objectType(__classPrivateFieldGet(this, _NgtMaterialGeometryController_contentGeometryController, "f").geometry || undefined, __classPrivateFieldGet(this, _NgtMaterialGeometryController_contentMaterialController, "f").material || undefined, ...__classPrivateFieldGet(this, _NgtMaterialGeometryController_meshArgs, "f"));
            if (this.morphTargetDictionary && 'morphTargetDictionary' in object) {
                object.morphTargetDictionary =
                    this.morphTargetDictionary;
            }
            if (this.morphTargetInfluences && 'morphTargetInfluences' in object) {
                object.morphTargetInfluences =
                    this.morphTargetInfluences;
            }
            if (this.objectPostInit) {
                this.objectPostInit(object);
            }
            return object;
        };
    }
    set meshArgs(v) {
        __classPrivateFieldSet(this, _NgtMaterialGeometryController_meshArgs, Array.isArray(v) ? v : [v], "f");
    }
    ngOnInit() {
        super.ngOnInit();
        this.ngZone.runOutsideAngular(() => {
            this.objectController.init();
        });
    }
    get controller() {
        return undefined;
    }
    get props() {
        return [];
    }
}
_NgtMaterialGeometryController_meshArgs = new WeakMap(), _NgtMaterialGeometryController_contentMaterialController = new WeakMap(), _NgtMaterialGeometryController_contentGeometryController = new WeakMap();
NgtMaterialGeometryController.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryController, deps: [{ token: i0.NgZone }, { token: NGT_OBJECT_WATCHED_CONTROLLER }, { token: NGT_OBJECT_TYPE }, { token: NGT_OBJECT_POST_INIT }, { token: NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER }, { token: NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER }], target: i0.ɵɵFactoryTarget.Directive });
NgtMaterialGeometryController.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.0.3", type: NgtMaterialGeometryController, selector: "\n    ngt-mesh,\n    ngt-instanced-mesh,\n    ngt-skinned-mesh,\n    ngt-line,\n    ngt-line-loop,\n    ngt-line-segments,\n    ngt-points\n  ", inputs: { morphTargetInfluences: "morphTargetInfluences", morphTargetDictionary: "morphTargetDictionary" }, providers: [
        NGT_OBJECT_CONTROLLER_PROVIDER,
        NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER,
        NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER,
    ], exportAs: ["ngtMaterialGeometryController"], usesInheritance: true, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryController, decorators: [{
            type: Directive,
            args: [{
                    selector: `
    ngt-mesh,
    ngt-instanced-mesh,
    ngt-skinned-mesh,
    ngt-line,
    ngt-line-loop,
    ngt-line-segments,
    ngt-points
  `,
                    exportAs: 'ngtMaterialGeometryController',
                    providers: [
                        NGT_OBJECT_CONTROLLER_PROVIDER,
                        NGT_CONTENT_MATERIAL_CONTROLLER_PROVIDER,
                        NGT_CONTENT_GEOMETRY_CONTROLLER_PROVIDER,
                    ],
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i1.NgtObject3dController, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_WATCHED_CONTROLLER]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_TYPE]
                }] }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [NGT_OBJECT_POST_INIT]
                }] }, { type: i2.NgtContentMaterialController, decorators: [{
                    type: Inject,
                    args: [NGT_CONTENT_MATERIAL_WATCHED_CONTROLLER]
                }] }, { type: i3.NgtContentGeometryController, decorators: [{
                    type: Inject,
                    args: [NGT_CONTENT_GEOMETRY_WATCHED_CONTROLLER]
                }] }]; }, propDecorators: { morphTargetInfluences: [{
                type: Input
            }], morphTargetDictionary: [{
                type: Input
            }] } });
export class NgtMaterialGeometryControllerModule {
}
NgtMaterialGeometryControllerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryControllerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
NgtMaterialGeometryControllerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryControllerModule, declarations: [NgtMaterialGeometryController], exports: [NgtMaterialGeometryController] });
NgtMaterialGeometryControllerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryControllerModule });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.0.3", ngImport: i0, type: NgtMaterialGeometryControllerModule, decorators: [{
            type: NgModule,
            args: [{
                    declarations: [NgtMaterialGeometryController],
                    exports: [NgtMaterialGeometryController],
                }]
        }] });
export const [NGT_MATERIAL_GEOMETRY_WATCHED_CONTROLLER, NGT_MATERIAL_GEOMETRY_CONTROLLER_PROVIDER,] = createControllerProviderFactory({
    watchedControllerTokenName: 'Watched MaterialGeometryController',
    controller: NgtMaterialGeometryController,
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0ZXJpYWwtZ2VvbWV0cnkuY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvcmUvc3JjL2xpYi9jb250cm9sbGVycy9tYXRlcmlhbC1nZW9tZXRyeS5jb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsWUFBWTtBQUNaLE9BQU8sRUFDTCxTQUFTLEVBQ1QsTUFBTSxFQUNOLGNBQWMsRUFDZCxLQUFLLEVBQ0wsUUFBUSxFQUNSLE1BQU0sR0FFUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUUvQixPQUFPLEVBQ0wsd0NBQXdDLEVBQ3hDLHVDQUF1QyxFQUN2Qyw0QkFBNEIsR0FDN0IsTUFBTSwrQkFBK0IsQ0FBQztBQUN2QyxPQUFPLEVBQ0wsd0NBQXdDLEVBQ3hDLHVDQUF1QyxFQUN2Qyw0QkFBNEIsR0FDN0IsTUFBTSwrQkFBK0IsQ0FBQztBQUN2QyxPQUFPLEVBQUUsVUFBVSxFQUFFLCtCQUErQixFQUFFLE1BQU0sY0FBYyxDQUFDO0FBQzNFLE9BQU8sRUFDTCw4QkFBOEIsRUFDOUIsNkJBQTZCLEVBQzdCLHFCQUFxQixHQUN0QixNQUFNLHdCQUF3QixDQUFDOzs7OztBQUVoQyxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQUcsSUFBSSxjQUFjLENBQUMsZUFBZSxFQUFFO0lBQ2pFLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsUUFBUTtDQUM5QixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLGNBQWMsQ0FBQyxtQkFBbUIsRUFBRTtJQUMxRSxVQUFVLEVBQUUsTUFBTTtJQUNsQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUztDQUN6QixDQUFDLENBQUM7QUFtQkgsTUFBTSxPQUFPLDZCQUNYLFNBQVEsVUFBVTtJQWNsQixZQUNFLE1BQWMsRUFFUCxnQkFBdUMsRUFFdkMsVUFBMEMsRUFFMUMsY0FBK0QsRUFFdEUseUJBQXVELEVBRXZELHlCQUF1RDtRQUV2RCxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFWUCxxQkFBZ0IsR0FBaEIsZ0JBQWdCLENBQXVCO1FBRXZDLGVBQVUsR0FBVixVQUFVLENBQWdDO1FBRTFDLG1CQUFjLEdBQWQsY0FBYyxDQUFpRDtRQWxCeEUsa0RBQXVCLEVBQUUsRUFBQztRQVExQiwyRUFBeUQ7UUFDekQsMkVBQXlEO1FBaUJ2RCx1QkFBQSxJQUFJLDREQUNGLHlCQUF5QixDQUFDLHlCQUF5QjtZQUNuRCx5QkFBeUIsTUFBQSxDQUFDO1FBQzVCLHVCQUFBLElBQUksNERBQ0YseUJBQXlCLENBQUMseUJBQXlCO1lBQ25ELHlCQUF5QixNQUFBLENBQUM7UUFFNUIsZ0JBQWdCLENBQUMsTUFBTSxHQUFHLEdBQUcsRUFBRTtZQUM3QixJQUFJLENBQUMsdUJBQUEsSUFBSSxnRUFBMkIsQ0FBQyxRQUFRLEVBQUU7Z0JBQzdDLHVCQUFBLElBQUksZ0VBQTJCLENBQUMsU0FBUyxFQUFFLENBQUM7YUFDN0M7WUFFRCxJQUFJLENBQUMsdUJBQUEsSUFBSSxnRUFBMkIsQ0FBQyxRQUFRLEVBQUU7Z0JBQzdDLHVCQUFBLElBQUksZ0VBQTJCLENBQUMsU0FBUyxFQUFFLENBQUM7YUFDN0M7WUFFRCxNQUFNLE1BQU0sR0FBRyxJQUFJLElBQUksQ0FBQyxVQUFVLENBQ2hDLHVCQUFBLElBQUksZ0VBQTJCLENBQUMsUUFBUSxJQUFJLFNBQVMsRUFDckQsdUJBQUEsSUFBSSxnRUFBMkIsQ0FBQyxRQUFRLElBQUksU0FBUyxFQUNyRCxHQUFHLHVCQUFBLElBQUksK0NBQVUsQ0FDbEIsQ0FBQztZQUVGLElBQUksSUFBSSxDQUFDLHFCQUFxQixJQUFJLHVCQUF1QixJQUFJLE1BQU0sRUFBRTtnQkFDbEUsTUFBbUMsQ0FBQyxxQkFBcUI7b0JBQ3hELElBQUksQ0FBQyxxQkFBcUIsQ0FBQzthQUM5QjtZQUVELElBQUksSUFBSSxDQUFDLHFCQUFxQixJQUFJLHVCQUF1QixJQUFJLE1BQU0sRUFBRTtnQkFDbEUsTUFBbUMsQ0FBQyxxQkFBcUI7b0JBQ3hELElBQUksQ0FBQyxxQkFBcUIsQ0FBQzthQUM5QjtZQUVELElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUM3QjtZQUVELE9BQU8sTUFBTSxDQUFDO1FBQ2hCLENBQUMsQ0FBQztJQUNKLENBQUM7SUEvREQsSUFBSSxRQUFRLENBQUMsQ0FBc0I7UUFDakMsdUJBQUEsSUFBSSwyQ0FBYSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQUEsQ0FBQztJQUM5QyxDQUFDO0lBK0RELFFBQVE7UUFDTixLQUFLLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLEVBQUU7WUFDakMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDO1FBQy9CLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELElBQUksVUFBVTtRQUNaLE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7OzswSEFuRlUsNkJBQTZCLHdDQWlCOUIsNkJBQTZCLGFBRTdCLGVBQWUsYUFFZixvQkFBb0IsYUFFcEIsdUNBQXVDLGFBRXZDLHVDQUF1Qzs4R0F6QnRDLDZCQUE2QixxUkFON0I7UUFDVCw4QkFBOEI7UUFDOUIsd0NBQXdDO1FBQ3hDLHdDQUF3QztLQUN6QzsyRkFFVSw2QkFBNkI7a0JBakJ6QyxTQUFTO21CQUFDO29CQUNULFFBQVEsRUFBRTs7Ozs7Ozs7R0FRVDtvQkFDRCxRQUFRLEVBQUUsK0JBQStCO29CQUN6QyxTQUFTLEVBQUU7d0JBQ1QsOEJBQThCO3dCQUM5Qix3Q0FBd0M7d0JBQ3hDLHdDQUF3QztxQkFDekM7aUJBQ0Y7OzBCQWtCSSxNQUFNOzJCQUFDLDZCQUE2Qjs7MEJBRXBDLE1BQU07MkJBQUMsZUFBZTs7MEJBRXRCLE1BQU07MkJBQUMsb0JBQW9COzswQkFFM0IsTUFBTTsyQkFBQyx1Q0FBdUM7OzBCQUU5QyxNQUFNOzJCQUFDLHVDQUF1Qzs0Q0FoQnhDLHFCQUFxQjtzQkFBN0IsS0FBSztnQkFDRyxxQkFBcUI7c0JBQTdCLEtBQUs7O0FBZ0ZSLE1BQU0sT0FBTyxtQ0FBbUM7O2dJQUFuQyxtQ0FBbUM7aUlBQW5DLG1DQUFtQyxpQkExRm5DLDZCQUE2QixhQUE3Qiw2QkFBNkI7aUlBMEY3QixtQ0FBbUM7MkZBQW5DLG1DQUFtQztrQkFKL0MsUUFBUTttQkFBQztvQkFDUixZQUFZLEVBQUUsQ0FBQyw2QkFBNkIsQ0FBQztvQkFDN0MsT0FBTyxFQUFFLENBQUMsNkJBQTZCLENBQUM7aUJBQ3pDOztBQUdELE1BQU0sQ0FBQyxNQUFNLENBQ1gsd0NBQXdDLEVBQ3hDLHlDQUF5QyxFQUMxQyxHQUFHLCtCQUErQixDQUFDO0lBQ2xDLDBCQUEwQixFQUFFLG9DQUFvQztJQUNoRSxVQUFVLEVBQUUsNkJBQTZCO0NBQzFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEdFTkVSQVRFRFxuaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBJbmplY3QsXG4gIEluamVjdGlvblRva2VuLFxuICBJbnB1dCxcbiAgTmdNb2R1bGUsXG4gIE5nWm9uZSxcbiAgT25Jbml0LFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJztcbmltcG9ydCB7IEFueUNvbnN0cnVjdG9yLCBBbnlFeHRlbmRlckZ1bmN0aW9uLCBVbmtub3duUmVjb3JkIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgTkdUX0NPTlRFTlRfR0VPTUVUUllfQ09OVFJPTExFUl9QUk9WSURFUixcbiAgTkdUX0NPTlRFTlRfR0VPTUVUUllfV0FUQ0hFRF9DT05UUk9MTEVSLFxuICBOZ3RDb250ZW50R2VvbWV0cnlDb250cm9sbGVyLFxufSBmcm9tICcuL2NvbnRlbnQtZ2VvbWV0cnkuY29udHJvbGxlcic7XG5pbXBvcnQge1xuICBOR1RfQ09OVEVOVF9NQVRFUklBTF9DT05UUk9MTEVSX1BST1ZJREVSLFxuICBOR1RfQ09OVEVOVF9NQVRFUklBTF9XQVRDSEVEX0NPTlRST0xMRVIsXG4gIE5ndENvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIsXG59IGZyb20gJy4vY29udGVudC1tYXRlcmlhbC5jb250cm9sbGVyJztcbmltcG9ydCB7IENvbnRyb2xsZXIsIGNyZWF0ZUNvbnRyb2xsZXJQcm92aWRlckZhY3RvcnkgfSBmcm9tICcuL2NvbnRyb2xsZXInO1xuaW1wb3J0IHtcbiAgTkdUX09CSkVDVF9DT05UUk9MTEVSX1BST1ZJREVSLFxuICBOR1RfT0JKRUNUX1dBVENIRURfQ09OVFJPTExFUixcbiAgTmd0T2JqZWN0M2RDb250cm9sbGVyLFxufSBmcm9tICcuL29iamVjdC0zZC5jb250cm9sbGVyJztcblxuZXhwb3J0IGNvbnN0IE5HVF9PQkpFQ1RfVFlQRSA9IG5ldyBJbmplY3Rpb25Ub2tlbignT2JqZWN0M2QgVHlwZScsIHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnLFxuICBmYWN0b3J5OiAoKSA9PiBUSFJFRS5PYmplY3QzRCxcbn0pO1xuXG5leHBvcnQgY29uc3QgTkdUX09CSkVDVF9QT1NUX0lOSVQgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ09iamVjdDNkIFBvc3RJbml0Jywge1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIGZhY3Rvcnk6ICgpID0+IHVuZGVmaW5lZCxcbn0pO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6IGBcbiAgICBuZ3QtbWVzaCxcbiAgICBuZ3QtaW5zdGFuY2VkLW1lc2gsXG4gICAgbmd0LXNraW5uZWQtbWVzaCxcbiAgICBuZ3QtbGluZSxcbiAgICBuZ3QtbGluZS1sb29wLFxuICAgIG5ndC1saW5lLXNlZ21lbnRzLFxuICAgIG5ndC1wb2ludHNcbiAgYCxcbiAgZXhwb3J0QXM6ICduZ3RNYXRlcmlhbEdlb21ldHJ5Q29udHJvbGxlcicsXG4gIHByb3ZpZGVyczogW1xuICAgIE5HVF9PQkpFQ1RfQ09OVFJPTExFUl9QUk9WSURFUixcbiAgICBOR1RfQ09OVEVOVF9NQVRFUklBTF9DT05UUk9MTEVSX1BST1ZJREVSLFxuICAgIE5HVF9DT05URU5UX0dFT01FVFJZX0NPTlRST0xMRVJfUFJPVklERVIsXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIE5ndE1hdGVyaWFsR2VvbWV0cnlDb250cm9sbGVyXG4gIGV4dGVuZHMgQ29udHJvbGxlclxuICBpbXBsZW1lbnRzIE9uSW5pdFxue1xuICAjbWVzaEFyZ3M6IHVua25vd25bXSA9IFtdO1xuICBzZXQgbWVzaEFyZ3ModjogdW5rbm93biB8IHVua25vd25bXSkge1xuICAgIHRoaXMuI21lc2hBcmdzID0gQXJyYXkuaXNBcnJheSh2KSA/IHYgOiBbdl07XG4gIH1cblxuICBASW5wdXQoKSBtb3JwaFRhcmdldEluZmx1ZW5jZXM/OiBudW1iZXJbXTtcbiAgQElucHV0KCkgbW9ycGhUYXJnZXREaWN0aW9uYXJ5PzogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcblxuICAjY29udGVudE1hdGVyaWFsQ29udHJvbGxlcjogTmd0Q29udGVudE1hdGVyaWFsQ29udHJvbGxlcjtcbiAgI2NvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXI6IE5ndENvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmdab25lOiBOZ1pvbmUsXG4gICAgQEluamVjdChOR1RfT0JKRUNUX1dBVENIRURfQ09OVFJPTExFUilcbiAgICBwdWJsaWMgb2JqZWN0Q29udHJvbGxlcjogTmd0T2JqZWN0M2RDb250cm9sbGVyLFxuICAgIEBJbmplY3QoTkdUX09CSkVDVF9UWVBFKVxuICAgIHB1YmxpYyBvYmplY3RUeXBlOiBBbnlDb25zdHJ1Y3RvcjxUSFJFRS5PYmplY3QzRD4sXG4gICAgQEluamVjdChOR1RfT0JKRUNUX1BPU1RfSU5JVClcbiAgICBwdWJsaWMgb2JqZWN0UG9zdEluaXQ6IEFueUV4dGVuZGVyRnVuY3Rpb248VEhSRUUuT2JqZWN0M0Q+IHwgdW5kZWZpbmVkLFxuICAgIEBJbmplY3QoTkdUX0NPTlRFTlRfTUFURVJJQUxfV0FUQ0hFRF9DT05UUk9MTEVSKVxuICAgIGNvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXI6IE5ndENvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIsXG4gICAgQEluamVjdChOR1RfQ09OVEVOVF9HRU9NRVRSWV9XQVRDSEVEX0NPTlRST0xMRVIpXG4gICAgY29udGVudEdlb21ldHJ5Q29udHJvbGxlcjogTmd0Q29udGVudEdlb21ldHJ5Q29udHJvbGxlclxuICApIHtcbiAgICBzdXBlcihuZ1pvbmUpO1xuXG4gICAgdGhpcy4jY29udGVudE1hdGVyaWFsQ29udHJvbGxlciA9XG4gICAgICBjb250ZW50TWF0ZXJpYWxDb250cm9sbGVyLmNvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIgPz9cbiAgICAgIGNvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXI7XG4gICAgdGhpcy4jY29udGVudEdlb21ldHJ5Q29udHJvbGxlciA9XG4gICAgICBjb250ZW50R2VvbWV0cnlDb250cm9sbGVyLmNvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXIgPz9cbiAgICAgIGNvbnRlbnRHZW9tZXRyeUNvbnRyb2xsZXI7XG5cbiAgICBvYmplY3RDb250cm9sbGVyLmluaXRGbiA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy4jY29udGVudEdlb21ldHJ5Q29udHJvbGxlci5nZW9tZXRyeSkge1xuICAgICAgICB0aGlzLiNjb250ZW50R2VvbWV0cnlDb250cm9sbGVyLmNvbnN0cnVjdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuI2NvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIubWF0ZXJpYWwpIHtcbiAgICAgICAgdGhpcy4jY29udGVudE1hdGVyaWFsQ29udHJvbGxlci5jb25zdHJ1Y3QoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgb2JqZWN0ID0gbmV3IHRoaXMub2JqZWN0VHlwZShcbiAgICAgICAgdGhpcy4jY29udGVudEdlb21ldHJ5Q29udHJvbGxlci5nZW9tZXRyeSB8fCB1bmRlZmluZWQsXG4gICAgICAgIHRoaXMuI2NvbnRlbnRNYXRlcmlhbENvbnRyb2xsZXIubWF0ZXJpYWwgfHwgdW5kZWZpbmVkLFxuICAgICAgICAuLi50aGlzLiNtZXNoQXJnc1xuICAgICAgKTtcblxuICAgICAgaWYgKHRoaXMubW9ycGhUYXJnZXREaWN0aW9uYXJ5ICYmICdtb3JwaFRhcmdldERpY3Rpb25hcnknIGluIG9iamVjdCkge1xuICAgICAgICAob2JqZWN0IGFzIHVua25vd24gYXMgVW5rbm93blJlY29yZCkubW9ycGhUYXJnZXREaWN0aW9uYXJ5ID1cbiAgICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0RGljdGlvbmFyeTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMubW9ycGhUYXJnZXRJbmZsdWVuY2VzICYmICdtb3JwaFRhcmdldEluZmx1ZW5jZXMnIGluIG9iamVjdCkge1xuICAgICAgICAob2JqZWN0IGFzIHVua25vd24gYXMgVW5rbm93blJlY29yZCkubW9ycGhUYXJnZXRJbmZsdWVuY2VzID1cbiAgICAgICAgICB0aGlzLm1vcnBoVGFyZ2V0SW5mbHVlbmNlcztcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub2JqZWN0UG9zdEluaXQpIHtcbiAgICAgICAgdGhpcy5vYmplY3RQb3N0SW5pdChvYmplY3QpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH07XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICBzdXBlci5uZ09uSW5pdCgpO1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIHRoaXMub2JqZWN0Q29udHJvbGxlci5pbml0KCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXQgY29udHJvbGxlcigpOiBDb250cm9sbGVyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgZ2V0IHByb3BzKCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuQE5nTW9kdWxlKHtcbiAgZGVjbGFyYXRpb25zOiBbTmd0TWF0ZXJpYWxHZW9tZXRyeUNvbnRyb2xsZXJdLFxuICBleHBvcnRzOiBbTmd0TWF0ZXJpYWxHZW9tZXRyeUNvbnRyb2xsZXJdLFxufSlcbmV4cG9ydCBjbGFzcyBOZ3RNYXRlcmlhbEdlb21ldHJ5Q29udHJvbGxlck1vZHVsZSB7fVxuXG5leHBvcnQgY29uc3QgW1xuICBOR1RfTUFURVJJQUxfR0VPTUVUUllfV0FUQ0hFRF9DT05UUk9MTEVSLFxuICBOR1RfTUFURVJJQUxfR0VPTUVUUllfQ09OVFJPTExFUl9QUk9WSURFUixcbl0gPSBjcmVhdGVDb250cm9sbGVyUHJvdmlkZXJGYWN0b3J5KHtcbiAgd2F0Y2hlZENvbnRyb2xsZXJUb2tlbk5hbWU6ICdXYXRjaGVkIE1hdGVyaWFsR2VvbWV0cnlDb250cm9sbGVyJyxcbiAgY29udHJvbGxlcjogTmd0TWF0ZXJpYWxHZW9tZXRyeUNvbnRyb2xsZXIsXG59KTtcbiJdfQ==